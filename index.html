<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VitroConnect Troubleshooting</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 0.9em;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-box {
            margin-bottom: 30px;
        }

        .question-box h2 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1.1em;
        }

        .option-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .result-box {
            background: #f0f8ff;
            border-left: 5px solid #667eea;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .result-box h2 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-section {
            margin-bottom: 20px;
        }

        .result-section h3 {
            color: #555;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-section ol, .result-section ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .result-section li {
            margin-bottom: 8px;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-copy {
            background: #28a745;
            color: white;
        }

        .btn-copy:hover {
            background: #218838;
        }

        .hidden {
            display: none;
        }

        .breadcrumb {
            color: #999;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß VitroConnect Troubleshooting</h1>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="breadcrumb" id="breadcrumb"></div>

        <div id="content"></div>

        <div class="action-buttons hidden" id="actionButtons">
            <button class="btn btn-secondary" onclick="goBack()">‚Üê Zur√ºck</button>
            <button class="btn btn-primary" onclick="restart()">üîÑ Von vorne</button>
        </div>
    </div>

    <script>
        // Decision Tree Datenstruktur
        const decisionTree = {
            start: {
                question: "Welcher Provider/Anschlusstyp?",
                options: [
                    { text: "EWE / VitroConnect (DSL)", next: "ewe_vitro" },
                    { text: "UGG (Glasfaser)", next: "ugg_glasfaser" }
                ]
            },
            
            // ===== EWE/VitroConnect Branch =====
            ewe_vitro: {
                question: "Welche St√∂rungsart liegt vor?",
                options: [
                    { text: "Komplettausfall", next: "ewe_komplettausfall" },
                    { text: "Sporadischer Ausfall", next: "ewe_sporadisch" },
                    { text: "Anschaltung / Einrichtung", next: "ewe_anschaltung" },
                    { text: "Performance Probleme", next: "ewe_performance" },
                    { text: "Telefonie Probleme", next: "ewe_telefonie" }
                ]
            },

            ewe_komplettausfall: {
                question: "Hat die Leitung im VitroConnect-Tool eine aktive Session?",
                options: [
                    { text: "Ja, Session aktiv", next: "ewe_ka_session_ja" },
                    { text: "Nein, keine Session", next: "ewe_ka_session_nein" }
                ]
            },

            ewe_ka_session_ja: {
                question: "Zeigt TITAN HDM Daten vom Router?",
                options: [
                    { text: "Ja, HDM sichtbar", next: "result_ewe_ka_hdm_ok" },
                    { text: "Nein, kein HDM", next: "result_ewe_ka_no_hdm" }
                ]
            },

            ewe_ka_session_nein: {
                question: "Wie ist der Port-Status im VitroConnect-Tool?",
                options: [
                    { text: "Port UP", next: "ewe_ka_port_up" },
                    { text: "Port DOWN", next: "result_ewe_ka_port_down" }
                ]
            },

            ewe_ka_port_up: {
                question: "Wie ist der Line-Status?",
                options: [
                    { text: "Line UP", next: "result_ewe_ka_line_up" },
                    { text: "Line DOWN", next: "result_ewe_ka_line_down" }
                ]
            },

            // ===== UGG Glasfaser Branch =====
            ugg_glasfaser: {
                question: "Welche St√∂rungsart liegt vor?",
                options: [
                    { text: "Komplettausfall", next: "ugg_komplettausfall" },
                    { text: "Sporadischer Ausfall", next: "ugg_sporadisch" },
                    { text: "Anschaltung / Einrichtung", next: "ugg_anschaltung" },
                    { text: "Performance Probleme", next: "ugg_performance" },
                    { text: "Telefonie Probleme", next: "ugg_telefonie" }
                ]
            },

            ugg_komplettausfall: {
                question: "Welche Router-Konfiguration liegt vor?",
                options: [
                    { text: "Mit ONT (Standard)", next: "ugg_ka_mit_ont" },
                    { text: "Direktanschluss (FB5590/5530 ohne ONT)", next: "ugg_ka_direkt" }
                ]
            },

            ugg_ka_mit_ont: {
                question: "Wie ist der ONT-Status im VitroConnect-Tool?",
                options: [
                    { text: "ONT UP", next: "ugg_ka_ont_up" },
                    { text: "ONT DOWN", next: "result_ugg_ka_ont_down" }
                ]
            },

            ugg_ka_ont_up: {
                question: "Hat die Leitung eine aktive PPPoE-Session?",
                options: [
                    { text: "Ja, Session aktiv", next: "ugg_ka_session_ja" },
                    { text: "Nein, keine Session", next: "result_ugg_ka_no_session" }
                ]
            },

            ugg_ka_session_ja: {
                question: "Zeigt TITAN HDM Daten vom Router?",
                options: [
                    { text: "Ja, HDM sichtbar", next: "result_ugg_ka_hdm_ok" },
                    { text: "Nein, kein HDM", next: "result_ugg_ka_no_hdm" }
                ]
            },

            ugg_ka_direkt: {
                question: "Ist die ONT-Installationskennung korrekt hinterlegt?",
                options: [
                    { text: "Ja, OVK korrekt", next: "ugg_ka_direkt_ovk_ok" },
                    { text: "Nein / Nicht sicher", next: "result_ugg_ka_direkt_ovk_fehlt" }
                ]
            },

            ugg_ka_direkt_ovk_ok: {
                question: "Hat die Leitung eine aktive PPPoE-Session?",
                options: [
                    { text: "Ja, Session aktiv", next: "result_ugg_ka_direkt_session_ok" },
                    { text: "Nein, keine Session", next: "result_ugg_ka_direkt_no_session" }
                ]
            },

            // ===== Sporadische Ausf√§lle =====
            ewe_sporadisch: {
                question: "Tritt der Ausfall zu bestimmten Zeiten auf?",
                options: [
                    { text: "Ja, zu bestimmten Zeiten", next: "result_ewe_sporadisch_zeitabh√§ngig" },
                    { text: "Nein, unregelm√§√üig", next: "result_ewe_sporadisch_unregelm√§√üig" }
                ]
            },

            ugg_sporadisch: {
                question: "Sind Sync-Abbr√ºche im VitroConnect-Tool sichtbar?",
                options: [
                    { text: "Ja, Sync-Abbr√ºche erkennbar", next: "result_ugg_sporadisch_sync" },
                    { text: "Nein, Leitung stabil", next: "result_ugg_sporadisch_stabil" }
                ]
            },

            // ===== Anschaltung =====
            ewe_anschaltung: {
                question: "Ist die Leitung bereits aktiv geschaltet?",
                options: [
                    { text: "Ja, laut System aktiv", next: "result_ewe_anschaltung_aktiv" },
                    { text: "Nein, noch in Bereitstellung", next: "result_ewe_anschaltung_offen" }
                ]
            },

            ugg_anschaltung: {
                question: "Mit oder ohne ONT?",
                options: [
                    { text: "Mit ONT", next: "ugg_anschaltung_ont" },
                    { text: "Direktanschluss (FB5590/5530)", next: "result_ugg_anschaltung_direkt" }
                ]
            },

            ugg_anschaltung_ont: {
                question: "Zeigt der ONT Status-LEDs?",
                options: [
                    { text: "Ja, ONT hat Power/Status LEDs", next: "result_ugg_anschaltung_ont_ok" },
                    { text: "Nein, ONT tot/keine LEDs", next: "result_ugg_anschaltung_ont_tot" }
                ]
            },

            // ===== Performance =====
            ewe_performance: {
                question: "Wie √§u√üert sich das Performance-Problem?",
                options: [
                    { text: "Niedrige Geschwindigkeit", next: "result_ewe_perf_speed" },
                    { text: "Hohe Latenz / Paketverluste", next: "result_ewe_perf_latency" }
                ]
            },

            ugg_performance: {
                question: "Ist die gebuchte Geschwindigkeit korrekt im System?",
                options: [
                    { text: "Ja, Tarif korrekt", next: "result_ugg_perf_tarif_ok" },
                    { text: "Nein, Tarif falsch/unklar", next: "result_ugg_perf_tarif_falsch" }
                ]
            },

            // ===== Telefonie =====
            ewe_telefonie: {
                question: "Welches Telefonie-Problem liegt vor?",
                options: [
                    { text: "Kann nicht angerufen werden", next: "result_ewe_tel_eingehend" },
                    { text: "Kann nicht raus telefonieren", next: "result_ewe_tel_ausgehend" },
                    { text: "Schlechte Sprachqualit√§t", next: "result_ewe_tel_qualit√§t" }
                ]
            },

            ugg_telefonie: {
                question: "Welches Telefonie-Problem liegt vor?",
                options: [
                    { text: "Kann nicht angerufen werden", next: "result_ugg_tel_eingehend" },
                    { text: "Kann nicht raus telefonieren", next: "result_ugg_tel_ausgehend" },
                    { text: "Schlechte Sprachqualit√§t", next: "result_ugg_tel_qualit√§t" }
                ]
            },

            // ===== RESULTS =====

            // EWE Results
            result_ewe_ka_hdm_ok: {
                result: {
                    title: "‚úÖ Router Online - Kundenseitiges Problem",
                    steps: [
                        "Kunde anrufen und Situation abkl√§ren",
                        "Pr√ºfen lassen: Alle Ger√§te offline? Einzelne Ger√§te?",
                        "Router-Neustart durchf√ºhren lassen",
                        "WLAN-Verbindung pr√ºfen (SSID sichtbar? Passwort korrekt?)",
                        "LAN-Verbindung testen (wenn m√∂glich)",
                        "Bei weiterhin NOK: Werksreset des Routers erw√§gen"
                    ],
                    ticket: "Ticket schlie√üen mit: 'Router online, HDM verf√ºgbar. Kundenseitige Verkabelung/Konfiguration gepr√ºft. NOK behoben / Kunde informiert.'",
                    tips: [
                        "üí° HDM zeigt, dass Router mit Backend kommuniziert = Internet funktioniert grunds√§tzlich",
                        "üí° Oft sind es WLAN-Probleme oder falsche Kabel"
                    ]
                }
            },

            result_ewe_ka_no_hdm: {
                result: {
                    title: "‚ö†Ô∏è Session aktiv, aber kein HDM",
                    steps: [
                        "Kunde anrufen",
                        "Router-Neustart durchf√ºhren lassen (mind. 30 Sek. vom Strom)",
                        "Nach 5 Min. erneut HDM pr√ºfen",
                        "Wenn HDM wieder da: Ticket schlie√üen",
                        "Wenn weiterhin kein HDM: Zum Router-Tausch eskalieren"
                    ],
                    ticket: "Bei Eskalation: 'Session vorhanden, aber kein HDM nach Reboot. Router defekt vermutet.'",
                    warnings: [
                        "‚ö†Ô∏è Keine Leitung-Entst√∂rung notwendig, da Session l√§uft!",
                        "‚ö†Ô∏è Nicht an Lineowner weiterleiten!"
                    ]
                }
            },

            result_ewe_ka_port_down: {
                result: {
                    title: "üî¥ Port DOWN - Leitungsst√∂rung",
                    steps: [
                        "Port-Reset im VitroConnect-Tool durchf√ºhren",
                        "5 Minuten warten",
                        "Status erneut pr√ºfen",
                        "Wenn weiterhin DOWN: Ticket an EWE/VitroConnect mit Techniker-Termin"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Port DOWN nach Reset. Line-ID: [LineID]. Techniker-Termin erforderlich.'",
                    tips: [
                        "üí° Port DOWN = Problem in der Vermittlungsstelle oder auf der Leitung",
                        "üí° Immer Port-Reset versuchen, bevor eskaliert wird!"
                    ],
                    contact: "‚òéÔ∏è Kunde anrufen f√ºr Terminvereinbarung (Techniker muss ggf. in Wohnung)"
                }
            },

            result_ewe_ka_line_up: {
                result: {
                    title: "üîß Line UP, aber keine Session",
                    steps: [
                        "Kunde anrufen",
                        "Router-Zugangsdaten pr√ºfen lassen (Benutzername/Passwort)",
                        "Router-Neustart durchf√ºhren",
                        "Wenn PPPoE-Fehler: Zugangsdaten neu eingeben lassen",
                        "Alternative: Router-Werksreset + Neueinrichtung"
                    ],
                    ticket: "Bei NOK nach 2 Versuchen: 'Line UP, PPPoE-Authentifizierung fehlgeschlagen. Zugangsdaten gepr√ºft. Router-Tausch empfohlen.'",
                    tips: [
                        "üí° Line UP = Leitung ist physisch OK",
                        "üí° Problem liegt meist an falschen Zugangsdaten oder Router-Defekt"
                    ]
                }
            },

            result_ewe_ka_line_down: {
                result: {
                    title: "üî¥ Line DOWN - Schwere Leitungsst√∂rung",
                    steps: [
                        "Line-Reset im VitroConnect-Tool durchf√ºhren",
                        "10 Minuten warten (DSL-Sync braucht Zeit)",
                        "Status erneut pr√ºfen",
                        "Wenn weiterhin DOWN: Sofort an EWE/VitroConnect eskalieren"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Line DOWN nach Reset. Keine Synchronisation. Line-ID: [LineID]. DRINGEND - Techniker-Termin erforderlich.'",
                    warnings: [
                        "‚ö†Ô∏è Line DOWN = Ernste St√∂rung (Kabelbruch, Vermittlungsstelle)",
                        "‚ö†Ô∏è Kunde kann NICHTS selbst tun - nur Techniker hilft!"
                    ],
                    contact: "‚òéÔ∏è Kunde anrufen: Techniker-Besuch zwingend notwendig"
                }
            },

            // UGG Glasfaser Results
            result_ugg_ka_ont_down: {
                result: {
                    title: "üî¥ ONT DOWN - Glasfaser-Problem",
                    steps: [
                        "Port-Reset im VitroConnect-Tool durchf√ºhren",
                        "5 Minuten warten",
                        "ONT-Status erneut pr√ºfen",
                        "Wenn weiterhin DOWN: Ticket OHNE Termin an UGG"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'ONT DOWN nach Port-Reset. Line-ID: [LineID]. Keine Synchronisation zum OLT. Glasfaser-Leitung pr√ºfen.'",
                    tips: [
                        "üí° ONT DOWN = Problem auf Glasfaser-Strecke oder im OLT",
                        "üí° KEIN Techniker-Termin - UGG pr√ºft erst Leitung remote!",
                        "üí° Oft innerhalb 24h gel√∂st durch Backend-Fixes"
                    ],
                    info: "‚ÑπÔ∏è Kunde informieren: 'St√∂rung auf Glasfaser-Leitung erkannt. Wird von Provider gepr√ºft, kein Termin notwendig. Update folgt.'"
                }
            },

            result_ugg_ka_no_session: {
                result: {
                    title: "üîß ONT UP, aber keine PPPoE-Session",
                    steps: [
                        "Kunde anrufen",
                        "Router-Zugangsdaten kontrollieren lassen",
                        "Verkabelung pr√ºfen: ONT LAN ‚Üí Router WAN-Port?",
                        "Router-Neustart durchf√ºhren",
                        "ONT-Stromreset (30 Sek. vom Strom)",
                        "Wenn weiterhin NOK: Port-Reset durchf√ºhren"
                    ],
                    ticket: "Wenn nach allen Schritten NOK: 'ONT UP, PPPoE-Fehler persistiert. Zugangsdaten und Verkabelung korrekt. Eskalation an UGG f√ºr Backend-Pr√ºfung.'",
                    tips: [
                        "üí° ONT UP = Glasfaser ist OK",
                        "üí° Problem meist: Falsche Zugangsdaten oder Router-Konfiguration",
                        "üí° Seltener: Backend-Problem bei UGG"
                    ]
                }
            },

            result_ugg_ka_hdm_ok: {
                result: {
                    title: "‚úÖ Router Online - Kundenseitiges Problem",
                    steps: [
                        "Kunde anrufen und Situation abkl√§ren",
                        "Pr√ºfen: Alle Ger√§te offline? Nur bestimmte?",
                        "Router-Neustart durchf√ºhren lassen",
                        "WLAN-Verbindung pr√ºfen",
                        "LAN-Test durchf√ºhren lassen",
                        "Bei NOK: Werksreset erw√§gen"
                    ],
                    ticket: "Ticket schlie√üen: 'Router online, HDM verf√ºgbar. Kundenseitige Konfiguration gepr√ºft. NOK behoben.'",
                    tips: [
                        "üí° HDM vorhanden = Internet funktioniert!",
                        "üí° Problem liegt definitiv beim Kunden (Ger√§t/WLAN/Verkabelung)"
                    ]
                }
            },

            result_ugg_ka_no_hdm: {
                result: {
                    title: "‚ö†Ô∏è Session aktiv, aber kein HDM",
                    steps: [
                        "Kunde anrufen",
                        "Router-Neustart (mind. 30 Sek. vom Strom)",
                        "Nach 5 Min. HDM erneut pr√ºfen",
                        "Wenn HDM da: Ticket schlie√üen",
                        "Wenn nicht: Router-Tausch veranlassen"
                    ],
                    ticket: "Bei Eskalation: 'Session vorhanden, kein HDM nach Reboot. Router-Defekt vermutet. Tausch erforderlich.'",
                    warnings: [
                        "‚ö†Ô∏è NICHT an UGG eskalieren - Session l√§uft ja!",
                        "‚ö†Ô∏è Router ist das Problem, nicht die Leitung!"
                    ]
                }
            },

            result_ugg_ka_direkt_ovk_fehlt: {
                result: {
                    title: "‚ö†Ô∏è ONT-Installationskennung fehlt/falsch",
                    steps: [
                        "ONT-Installationskennung (OVK) im VitroConnect-Tool pr√ºfen",
                        "Auf Router-Aufkleber schauen: 'Installations-ID' oder 'ONT S/N'",
                        "Wenn abweichend: OVK im System korrigieren (dauert ~15 Min. bis aktiv)",
                        "Router-Neustart durchf√ºhren lassen",
                        "Nach 15 Min. Session-Status pr√ºfen"
                    ],
                    ticket: "Wenn OVK korrigiert: 'ONT-Installationskennung korrigiert. Session aufgebaut. Ticket geschlossen.'",
                    tips: [
                        "üí° Bei Direktanschluss (FB5590/5530) MUSS die OVK stimmen!",
                        "üí° Router verh√§lt sich wie ein ONT - daher wird S/N ben√∂tigt",
                        "üí° Falsche OVK = Router wird vom OLT nicht erkannt"
                    ],
                    warnings: [
                        "‚ö†Ô∏è OVK-√Ñnderung dauert bis zu 15 Minuten!",
                        "‚ö†Ô∏è Kunde muss Router danach neu starten!"
                    ]
                }
            },

            result_ugg_ka_direkt_session_ok: {
                result: {
                    title: "‚úÖ Direktanschluss funktioniert",
                    steps: [
                        "Kunde anrufen",
                        "Problem genauer abfragen",
                        "Wie bei normalem Router vorgehen (siehe 'Router Online')",
                        "Ticket schlie√üen nach Entst√∂rung"
                    ],
                    ticket: "Ticket schlie√üen: 'Direktanschluss (FB5590/5530) funktioniert. OVK korrekt, Session aktiv. Kundenseitiges Problem behoben.'",
                    tips: [
                        "üí° Direktanschluss funktioniert wie normaler Router",
                        "üí° Nur Unterschied: OVK muss stimmen"
                    ]
                }
            },

            result_ugg_ka_direkt_no_session: {
                result: {
                    title: "üîß Direktanschluss: Keine Session",
                    steps: [
                        "OVK im System pr√ºfen (siehe 'OVK fehlt')",
                        "Wenn OVK korrekt: Port-Reset durchf√ºhren",
                        "15 Minuten warten",
                        "Router-Neustart beim Kunden",
                        "Wenn weiterhin NOK: An UGG eskalieren"
                    ],
                    ticket: "Eskalation: 'Direktanschluss FB5590/5530. OVK korrekt hinterlegt. Keine PPPoE-Session nach Port-Reset. Backend-Pr√ºfung erforderlich.'",
                    tips: [
                        "üí° Bei Direktanschluss √∂fter Backend-Probleme",
                        "üí° OVK muss 100% korrekt sein - sonst keine Chance!"
                    ]
                }
            },

            // Sporadisch Results
            result_ewe_sporadisch_zeitabh√§ngig: {
                result: {
                    title: "üìä Zeitabh√§ngige Ausf√§lle",
                    steps: [
                        "Log-Analyse im VitroConnect-Tool (Sync-Abbr√ºche?)",
                        "Zeiten mit Kunde abgleichen",
                        "Wenn Muster erkennbar: An EWE mit detaillierter Zeitangabe",
                        "Kunde bitten, St√∂rungszeiten zu dokumentieren"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Sporadische Ausf√§lle zu folgenden Zeiten: [Zeiten]. Sync-Abbr√ºche im Log erkennbar. Leitungspr√ºfung erforderlich.'",
                    tips: [
                        "üí° Zeitabh√§ngig deutet auf externe St√∂rquelle hin (z.B. Nachbar, Stromnetz)",
                        "üí° Techniker-Termin meist erforderlich zur Messung vor Ort"
                    ]
                }
            },

            result_ewe_sporadisch_unregelm√§√üig: {
                result: {
                    title: "üîÑ Unregelm√§√üige Ausf√§lle",
                    steps: [
                        "Kunde nach H√§ufigkeit fragen (t√§glich? w√∂chentlich?)",
                        "Router-Logs sichern lassen (falls m√∂glich)",
                        "Verkabelung pr√ºfen lassen (lose Kabel?)",
                        "Bei h√§ufig: An EWE mit 'Intermittierend'-Vermerk"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Sporadische Ausf√§lle ohne Muster. H√§ufigkeit: [X]. Verkabelung gepr√ºft OK. Leitungsmessung erforderlich.'",
                    tips: [
                        "üí° Schwierig zu analysieren - Kunde muss mithelfen",
                        "üí° Oft hilft nur Langzeit-Monitoring durch Lineowner"
                    ]
                }
            },

            result_ugg_sporadisch_sync: {
                result: {
                    title: "üî¥ Sync-Abbr√ºche erkennbar",
                    steps: [
                        "Timestamps der Abbr√ºche notieren",
                        "Kunde fragen: ONT-LEDs blinken w√§hrend Ausfall?",
                        "Wenn ja: Glasfaser-Problem ‚Üí An UGG OHNE Termin",
                        "Wenn nein: Router-Problem ‚Üí Router-Tausch"
                    ],
                    ticket: "An UGG: 'Regelm√§√üige Sync-Abbr√ºche. Timestamps: [Zeiten]. ONT-Status w√§hrend Ausfall: [UP/DOWN]. Leitungspr√ºfung erforderlich.'",
                    tips: [
                        "üí° Sync-Abbr√ºche im Log = Beweisbar!",
                        "üí° UGG kann dann gezielt die Leitung pr√ºfen"
                    ]
                }
            },

            result_ugg_sporadisch_stabil: {
                result: {
                    title: "‚úÖ Leitung stabil, kein Log-Eintrag",
                    steps: [
                        "Mit Kunde telefonisch Situation durchgehen",
                        "Was genau passiert? (Komplett offline? Nur langsam?)",
                        "WLAN-Probleme ausschlie√üen (5GHz vs. 2.4GHz)",
                        "Andere Ger√§te testen lassen",
                        "Bei Router-Verdacht: Tausch veranlassen"
                    ],
                    ticket: "Ticket schlie√üen: 'Leitung laut Monitoring stabil. Keine Sync-Abbr√ºche. Kundenseitige √úberpr√ºfung durchgef√ºhrt. Problem nicht reproduzierbar.'",
                    tips: [
                        "üí° Wenn keine Sync-Abbr√ºche im Log: Meist KEIN Leitungsproblem",
                        "üí° Oft WLAN-Reichweite oder Ger√§te-Problem"
                    ]
                }
            },

            // Anschaltung Results
            result_ewe_anschaltung_aktiv: {
                result: {
                    title: "üÜï Anschaltung aktiv",
                    steps: [
                        "Port- und Line-Status wie bei Komplettausfall pr√ºfen",
                        "Wenn UP: Kunde Router-Zugangsdaten einrichten lassen",
                        "Schritt-f√ºr-Schritt telefonisch begleiten",
                        "Nach erfolgreicher Einrichtung: Ticket schlie√üen"
                    ],
                    ticket: "Ticket schlie√üen: 'Neuanschaltung erfolgreich. Leitung aktiv. Router konfiguriert. Kunde online.'",
                    tips: [
                        "üí° Bei Neuanschaltung sind Zugangsdaten oft das Problem",
                        "üí° Geduld haben - Kunde kennt Router oft noch nicht!"
                    ]
                }
            },

            result_ewe_anschaltung_offen: {
                result: {
                    title: "‚è≥ Anschaltung noch nicht abgeschlossen",
                    steps: [
                        "Schalttermin im System pr√ºfen",
                        "Kunde √ºber Status informieren",
                        "Wenn Schalttermin √ºberschritten: An EWE eskalieren",
                        "Wenn Termin noch offen: Ticket auf 'Wartend' setzen"
                    ],
                    ticket: "Bei Eskalation: 'Schalttermin [Datum] √ºberschritten. Leitung weiterhin nicht aktiv. Pr√ºfung und Eskalation erforderlich.'",
                    info: "‚ÑπÔ∏è Kunde informieren: 'Schaltung ist f√ºr [Datum] geplant. Aktuell noch in Bearbeitung beim Lineowner.'"
                }
            },

            result_ugg_anschaltung_ont_ok: {
                result: {
                    title: "‚úÖ ONT zeigt LEDs - Hardware OK",
                    steps: [
                        "ONT-Status im VitroConnect-Tool pr√ºfen (siehe Komplettausfall)",
                        "Wenn ONT UP: Router-Konfiguration mit Kunde durchgehen",
                        "Zugangsdaten einrichten",
                        "Nach Erfolg: Ticket schlie√üen"
                    ],
                    ticket: "Ticket schlie√üen: 'Neuanschaltung Glasfaser erfolgreich. ONT online, Router konfiguriert. Kunde online.'",
                    tips: [
                        "üí° LEDs am ONT = Hardware funktioniert",
                        "üí° Dann wie normale Entst√∂rung vorgehen"
                    ]
                }
            },

            result_ugg_anschaltung_ont_tot: {
                result: {
                    title: "üîå ONT ohne LEDs - Hardware-Problem",
                    steps: [
                        "Kunde Stromversorgung pr√ºfen lassen (Netzteil eingesteckt?)",
                        "Anderes Netzteil testen lassen (falls vorhanden)",
                        "Wenn weiterhin tot: Defekter ONT ‚Üí Austausch veranlassen",
                        "Techniker-Termin f√ºr ONT-Tausch"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Neuanschaltung. ONT zeigt keine LEDs. Stromversorgung gepr√ºft. ONT defekt vermutet. Austausch erforderlich.'",
                    warnings: [
                        "‚ö†Ô∏è ONT geh√∂rt dem Lineowner - WIR tauschen nicht!",
                        "‚ö†Ô∏è Techniker-Termin zwingend notwendig"
                    ],
                    contact: "‚òéÔ∏è Termin mit Kunde vereinbaren f√ºr ONT-Tausch"
                }
            },

            result_ugg_anschaltung_direkt: {
                result: {
                    title: "üîß Direktanschluss-Neuanschaltung",
                    steps: [
                        "OVK im System pr√ºfen (Router S/N auf Aufkleber)",
                        "Wenn nicht hinterlegt: OVK eintragen",
                        "15 Minuten warten",
                        "Router-Zugangsdaten mit Kunde konfigurieren",
                        "Nach Erfolg: Ticket schlie√üen"
                    ],
                    ticket: "Ticket schlie√üen: 'Neuanschaltung Direktanschluss FB5590/5530. OVK korrekt hinterlegt. Router konfiguriert. Kunde online.'",
                    tips: [
                        "üí° Bei Neuanschaltung ist OVK oft noch nicht im System!",
                        "üí° Immer als erstes pr√ºfen bei Direktanschluss!"
                    ],
                    warnings: [
                        "‚ö†Ô∏è OVK-Eintragung dauert bis zu 15 Minuten!",
                        "‚ö†Ô∏è Kunde muss warten, bevor es funktioniert"
                    ]
                }
            },

            // Performance Results
            result_ewe_perf_speed: {
                result: {
                    title: "üêå Niedrige Geschwindigkeit",
                    steps: [
                        "Gebuchte Geschwindigkeit vs. Line-Speed im Tool pr√ºfen",
                        "Speedtest mit Kunde durchf√ºhren (LAN-Kabel!)",
                        "WLAN ausschlie√üen (oft Ursache f√ºr langsam)",
                        "Wenn LAN auch langsam: Line-Speed pr√ºfen",
                        "Bei niedrigem Line-Speed: An EWE eskalieren"
                    ],
                    ticket: "Bei Eskalation: 'Performance-Problem. Gebuchte Geschwindigkeit: [X] Mbit/s. Line-Speed: [Y] Mbit/s. Speedtest LAN: [Z] Mbit/s. Leitungspr√ºfung erforderlich.'",
                    tips: [
                        "üí° IMMER LAN-Test machen - WLAN ist meist der Flaschenhals!",
                        "üí° Line-Speed < 80% der gebuchten Speed = Leitungsproblem"
                    ],
                    info: "‚ÑπÔ∏è Speedtest-Empfehlung: speedtest.net oder fast.com, mehrfach testen!"
                }
            },

            result_ewe_perf_latency: {
                result: {
                    title: "üì∂ Hohe Latenz / Paketverluste",
                    steps: [
                        "Mit Kunde Ping-Test durchf√ºhren (zu 8.8.8.8)",
                        "Paketverluste erkennbar?",
                        "Wenn ja: An EWE mit 'Intermittierend'-Vermerk",
                        "Wenn nein, aber hohe Latenz: Leitungspr√ºfung"
                    ],
                    ticket: "St√∂rungsbeschreibung: 'Hohe Latenz [X ms] / Paketverluste [Y%]. Ping-Test durchgef√ºhrt. Leitungsqualit√§t unzureichend.'",
                    tips: [
                        "üí° Paketverluste = Ernstes Problem, immer eskalieren!",
                        "üí° Latenz >50ms bei DSL = Auff√§llig"
                    ]
                }
            },

            result_ugg_perf_tarif_ok: {
                result: {
                    title: "üêå Tarif korrekt, trotzdem langsam",
                    steps: [
                        "Speedtest mit Kunde (LAN!)",
                        "WLAN ausschlie√üen",
                        "Bei Glasfaser: Volle Geschwindigkeit sollte ankommen",
                        "Wenn deutlich weniger: Port-Reset durchf√ºhren",
                        "Wenn weiterhin langsam: An UGG eskalieren"
                    ],
                    ticket: "Bei Eskalation: 'Glasfaser Performance-Problem. Tarif: [X] Mbit/s. Speedtest LAN: [Y] Mbit/s. Port-Reset durchgef√ºhrt ohne Erfolg. Backend-Pr√ºfung erforderlich.'",
                    tips: [
                        "üí° Glasfaser sollte IMMER volle Geschwindigkeit liefern!",
                        "üí° Wenn nicht: Backend-Problem oder Router-Defekt"
                    ],
                    warnings: [
                        "‚ö†Ô∏è Bei Glasfaser gibt es keine 'Leitungsd√§mpfung' wie DSL!",
                        "‚ö†Ô∏è Entweder volle Speed oder gar nichts"
                    ]
                }
            },

            result_ugg_perf_tarif_falsch: {
                result: {
                    title: "‚ö†Ô∏è Tarif nicht korrekt im System",
                    steps: [
                        "Vertrag im System pr√ºfen",
                        "Mit VitroConnect-Tool abgleichen",
                        "Wenn abweichend: Tarif-Korrektur veranlassen",
                        "Nach Korrektur: Port-Reset",
                        "Speedtest mit Kunde nach 15 Min."
                    ],
                    ticket: "Ticket schlie√üen nach Korrektur: 'Tarif im System korrigiert. Port-Reset durchgef√ºhrt. Geschwindigkeit jetzt korrekt.'",
                    tips: [
                        "üí° Falsche Tarif-Hinterlegung = h√§ufiger Fehler bei UGG!",
                        "üí° Immer mit Vertrag abgleichen"
                    ]
                }
            },

            // Telefonie Results
            result_ewe_tel_eingehend: {
                result: {
                    title: "üìû Eingehende Anrufe funktionieren nicht",
                    steps: [
                        "Rufnummer im System pr√ºfen (korrekt hinterlegt?)",
                        "Telefon-Registrierung im Router pr√ºfen",
                        "Test: Kunde selbst anrufen",
                        "Wenn besetzt/nicht erreichbar: Router-Neustart",
                        "Wenn weiterhin NOK: An VoIP-Team eskalieren"
                    ],
                    ticket: "Bei Eskalation: 'Eingehende Telefonie NOK. Rufnummer: [Nummer]. Registrierung: [OK/NOK]. Test-Anruf durchgef√ºhrt: [Ergebnis].'",
                    tips: [
                        "üí° Oft ist Telefon-Registrierung im Router das Problem",
                        "üí° Router-Neustart hilft in 70% der F√§lle!"
                    ]
                }
            },

            result_ewe_tel_ausgehend: {
                result: {
                    title: "üìû Ausgehende Anrufe funktionieren nicht",
                    steps: [
                        "SIP-Zugangsdaten im Router pr√ºfen",
                        "Test: Kunde eine bekannte Nummer anrufen lassen",
                        "Fehlercode? (z.B. '403 Forbidden', '404 Not Found')",
                        "Router-Neustart",
                        "Wenn weiterhin NOK: An VoIP-Team"
                    ],
                    ticket: "Bei Eskalation: 'Ausgehende Telefonie NOK. SIP-Fehlercode: [Code]. Router-Neustart ohne Erfolg. VoIP-Pr√ºfung erforderlich.'",
                    tips: [
                        "üí° SIP-Fehler deuten auf Registrierungs-Problem hin",
                        "üí° Seltener: Backend-Problem bei VoIP-Provider"
                    ]
                }
            },

            result_ewe_tel_qualit√§t: {
                result: {
                    title: "üìû Schlechte Sprachqualit√§t",
                    steps: [
                        "Art der St√∂rung: Echo? Rauschen? Abbr√ºche?",
                        "Andere Telefon testen lassen (Hardware-Defekt?)",
                        "Wenn Internet-Performance schlecht: Zuerst entst√∂ren",
                        "Wenn Internet OK: An VoIP-Team mit Beschreibung"
                    ],
                    ticket: "Bei Eskalation: 'Sprachqualit√§t mangelhaft. Symptome: [Echo/Rauschen/Abbr√ºche]. Hardware-Tausch durchgef√ºhrt: [Ja/Nein]. Internet-Performance: [OK/NOK].'",
                    tips: [
                        "üí° Sprachqualit√§t h√§ngt oft mit Internet-Performance zusammen",
                        "üí° Erst Internet entst√∂ren, dann Telefonie!"
                    ]
                }
            },

            result_ugg_tel_eingehend: {
                result: {
                    title: "üìû Eingehende Anrufe NOK (Glasfaser)",
                    steps: [
                        "Wie bei EWE vorgehen (siehe dort)",
                        "Zus√§tzlich: ONT-Status pr√ºfen (falls vorhanden)",
                        "VoIP l√§uft √ºber Internet - also Internet-Check first!"
                    ],
                    ticket: "Bei Eskalation wie EWE, zus√§tzlich: 'Anschlusstyp: UGG Glasfaser. ONT-Status: [UP/DOWN].'",
                    tips: [
                        "üí° Bei Glasfaser gelten gleiche VoIP-Regeln wie DSL",
                        "üí° Internet muss funktionieren, sonst keine Telefonie!"
                    ]
                }
            },

            result_ugg_tel_ausgehend: {
                result: {
                    title: "üìû Ausgehende Anrufe NOK (Glasfaser)",
                    steps: [
                        "Wie bei EWE vorgehen (siehe dort)",
                        "Internet-Check durchf√ºhren",
                        "Bei Internet OK: An VoIP-Team"
                    ],
                    ticket: "Bei Eskalation wie EWE, zus√§tzlich: 'Anschlusstyp: UGG Glasfaser.'",
                    tips: [
                        "üí° Gleiches Vorgehen wie bei DSL"
                    ]
                }
            },

            result_ugg_tel_qualit√§t: {
                result: {
                    title: "üìû Sprachqualit√§t schlecht (Glasfaser)",
                    steps: [
                        "Wie bei EWE vorgehen",
                        "Bei Glasfaser sollte Qualit√§t eigentlich perfekt sein",
                        "Wenn nicht: Verdacht auf Router-Problem oder VoIP-Backend"
                    ],
                    ticket: "Bei Eskalation wie EWE.",
                    tips: [
                        "üí° Glasfaser = Beste Qualit√§t, sollte keine Probleme geben",
                        "üí° Wenn doch: Meist Router-Defekt"
                    ]
                }
            }
        };

        // State Management
        let currentStep = 'start';
        let history = [];

        // Navigation Functions
        function navigate(nextStep) {
            history.push(currentStep);
            currentStep = nextStep;
            render();
        }

        function goBack() {
            if (history.length > 0) {
                currentStep = history.pop();
                render();
            }
        }

        function restart() {
            currentStep = 'start';
            history = [];
            render();
        }

        // Render Function
        function render() {
            const content = document.getElementById('content');
            const actionButtons = document.getElementById('actionButtons');
            const breadcrumb = document.getElementById('breadcrumb');
            const step = decisionTree[currentStep];

            // Update Progress Bar
            const progress = (history.length / 5) * 100;
            document.getElementById('progressBar').style.width = Math.min(progress, 100) + '%';

            // Update Breadcrumb
            breadcrumb.textContent = `Schritt ${history.length + 1}`;

            // Show/Hide Action Buttons
            if (history.length > 0) {
                actionButtons.classList.remove('hidden');
            } else {
                actionButtons.classList.add('hidden');
            }

            // Render Content
            if (step.result) {
                renderResult(step.result);
            } else {
                renderQuestion(step);
            }
        }

        function renderQuestion(step) {
            const content = document.getElementById('content');
            
            let html = `
                <div class="question-box">
                    <h2>${step.question}</h2>
                    <div class="options">
            `;

            step.options.forEach(option => {
                html += `
                    <button class="option-btn" onclick="navigate('${option.next}')">
                        ${option.text}
                    </button>
                `;
            });

            html += `
                    </div>
                </div>
            `;

            content.innerHTML = html;
        }

        function renderResult(result) {
            const content = document.getElementById('content');
            
            let html = `
                <div class="result-box">
                    <h2>${result.title}</h2>
            `;

            // Steps
            if (result.steps) {
                html += `
                    <div class="result-section">
                        <h3>üìã Handlungsschritte:</h3>
                        <ol>
                `;
                result.steps.forEach(step => {
                    html += `<li>${step}</li>`;
                });
                html += `
                        </ol>
                    </div>
                `;
            }

            // Ticket Description
            if (result.ticket) {
                html += `
                    <div class="result-section">
                        <h3>üìù Ticket-Bearbeitung:</h3>
                        <p>${result.ticket}</p>
                    </div>
                `;
            }

            // Tips
            if (result.tips) {
                result.tips.forEach(tip => {
                    html += `
                        <div class="tip-box">
                            <strong>${tip}</strong>
                        </div>
                    `;
                });
            }

            // Warnings
            if (result.warnings) {
                result.warnings.forEach(warning => {
                    html += `
                        <div class="warning-box">
                            <strong>${warning}</strong>
                        </div>
                    `;
                });
            }

            // Info
            if (result.info) {
                html += `
                    <div class="info-box">
                        <strong>${result.info}</strong>
                    </div>
                `;
            }

            // Contact
            if (result.contact) {
                html += `
                    <div class="info-box">
                        <strong>${result.contact}</strong>
                    </div>
                `;
            }

            html += `
                </div>
                <div class="action-buttons">
                    <button class="btn btn-copy" onclick="copyResult()">üìã Kopieren</button>
                    <button class="btn btn-primary" onclick="restart()">üîÑ Neue St√∂rung</button>
                </div>
            `;

            content.innerHTML = html;
        }

        function copyResult() {
            const resultBox = document.querySelector('.result-box');
            const text = resultBox.innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Ergebnis in Zwischenablage kopiert!');
            });
        }

        // Initial Render
        render();
    </script>
</body>
</html>
