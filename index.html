<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vitro Troubleshooter</title>
    <style>
        /* ===== GRUNDLEGENDES DESIGN ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* ===== HEADER ===== */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* ===== PROGRESS BAR ===== */
        .progress-container {
            background: #f0f0f0;
            padding: 20px 30px;
            border-bottom: 1px solid #ddd;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        /* ===== CONTENT BEREICH ===== */
        .content {
            padding: 40px;
        }

        .step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* ===== BUTTONS ===== */
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: left;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
        }

        .btn:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        /* ===== INPUT FELDER ===== */
        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-weight: 600;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        /* ===== INFO BOXEN ===== */
        .info-box {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid;
        }

        .info-box.tip {
            background: #e3f2fd;
            border-color: #2196F3;
            color: #1565C0;
        }

        .info-box.warning {
            background: #fff3e0;
            border-color: #FF9800;
            color: #E65100;
        }

        .info-box.success {
            background: #e8f5e9;
            border-color: #4CAF50;
            color: #2E7D32;
        }

        .info-box.error {
            background: #ffebee;
            border-color: #f44336;
            color: #c62828;
        }

        .info-box strong {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        /* ===== LED STATUS ===== */
        .led-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 10px 0;
        }

        .led-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .led-indicator.green { background: #4CAF50; box-shadow: 0 0 10px #4CAF50; }
        .led-indicator.red { background: #f44336; box-shadow: 0 0 10px #f44336; }
        .led-indicator.orange { background: #FF9800; box-shadow: 0 0 10px #FF9800; }
        .led-indicator.off { background: #666; }

        /* ===== RESULT BOX ===== */
        .result-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #667eea;
        }

        .result-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .result-box pre {
            background: white;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .copy-btn {
            margin-top: 15px;
            padding: 12px 25px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .copy-btn:active {
            transform: scale(0.98);
        }

        /* ===== NAVIGATION BUTTONS ===== */
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-back {
            padding: 12px 25px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-back:hover {
            background: #5a6268;
        }

        .btn-restart {
            padding: 12px 25px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-restart:hover {
            background: #c82333;
        }

        /* ===== CHECKLIST ===== */
        .checklist {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .checklist-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* ===== RESPONSIVE (minimal, da kein Mobile) ===== */
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üîß Vitro Troubleshooter</h1>
            <p>Schritt-f√ºr-Schritt zur L√∂sung</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">Schritt 1 von 10</div>
        </div>

        <!-- Back Button -->
        <button id="backButton" class="back-button" onclick="previousStep()" style="display: none;">
            ‚Üê Zur√ºck
        </button>

        <!-- Content Area -->
        <div class="content">

            <!-- ===== STEP 1: LineOwner ===== -->
            <div id="step1" class="step active">
                <h2>üì° LineOwner ausw√§hlen</h2>
                <p class="step-description">Welcher Provider stellt die Leitung bereit?</p>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="setLineOwner('DTAG')">
                        üü° DTAG (Deutsche Telekom)
                    </button>
                    <button class="btn btn-primary" onclick="setLineOwner('DNS:NET')">
                        üîµ DNS:NET
                    </button>
                    <button class="btn btn-primary" onclick="setLineOwner('inexio')">
                        üü¢ inexio
                    </button>
                </div>

                <div class="info-box">
                    <strong>üí° Tipp:</strong> Der LineOwner steht meist in den Anschlussdaten oder im CRM-System.
                </div>
            </div>

            <!-- ===== STEP 2: Aktivit√§t pr√ºfen ===== -->
            <div id="step2" class="step">
                <h2>üîç Aktivit√§t pr√ºfen</h2>
                <p class="step-description">Hat die Leitung bereits Aktivit√§t gehabt?</p>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="setActivity('yes')">
                        ‚úÖ Ja, Leitung hatte bereits Aktivit√§t
                    </button>
                    <button class="btn btn-danger" onclick="setActivity('no')">
                        ‚ùå Nein, noch nie Aktivit√§t gehabt
                    </button>
                </div>

                <div class="info-box">
                    <strong>üí° Was bedeutet "Aktivit√§t"?</strong><br>
                    Hat der Kunde schon einmal erfolgreich Internet √ºber diesen Anschluss genutzt?
                </div>
            </div>

            <!-- ===== STEP 2b: Anschaltdatum ===== -->
            <div id="step2b" class="step">
                <h2>üìÖ Anschaltdatum pr√ºfen</h2>
                <p class="step-description">Ist ein Anschaltdatum bekannt/dokumentiert?</p>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="setAnschaltdatum('yes')">
                        ‚úÖ Ja, Anschaltdatum ist bekannt
                    </button>
                    <button class="btn btn-danger" onclick="setAnschaltdatum('no')">
                        ‚ùå Nein, kein Anschaltdatum bekannt
                    </button>
                </div>

                <div class="info-box warning">
                    <strong>‚ö†Ô∏è Wichtig:</strong> Ohne Anschaltdatum kann keine Anschaltung bearbeitet werden!
                </div>
            </div>

            <!-- ===== STEP 3: Ticket-Typ ===== -->
            <div id="step3" class="step">
                <h2>üé´ Welche Art von St√∂rung?</h2>
                <p class="step-description">Was beschreibt das Problem am besten?</p>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="setTicketType('anschaltung')">
                        üÜï Anschaltung (Erstinstallation)
                    </button>
                    <button class="btn btn-danger" onclick="setTicketType('komplettausfall')">
                        üî¥ Komplettausfall (kein Internet)
                    </button>
                    <button class="btn btn-warning" onclick="setTicketType('sporadisch')">
                        ‚ö° Sporadische Abbr√ºche
                    </button>
                    <button class="btn btn-info" onclick="setTicketType('performance')">
                        üìä Performance-Problem (zu langsam)
                    </button>
                </div>
            </div>

            <!-- ===== STEP 4: Router-Modell ===== -->
            <div id="step4-router" class="step">
                <h2>üì° Welcher Router?</h2>
                <p class="step-description">Welches Router-Modell verwendet der Kunde?</p>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="setRouterModel('fritzbox')">
                        üî¥ AVM FRITZ!Box
                    </button>
                    <button class="btn btn-primary" onclick="setRouterModel('homebox')">
                        üîµ o2 HomeBox
                    </button>
                    <button class="btn btn-secondary" onclick="setRouterModel('dritthersteller')">
                        üîß Dritthersteller (anderer Router)
                    </button>
                </div>

                <div class="info-box">
                    <strong>üí° H√§ufige Modelle:</strong><br>
                    ‚Ä¢ FRITZ!Box 5530, 5590, 7590<br>
                    ‚Ä¢ o2 HomeBox 3<br>
                    ‚Ä¢ TP-Link, Asus, Netgear, etc.
                </div>
            </div>

            <!-- ===== STEP 5: Verkabelung ===== -->
            <div id="step5-verkabelung" class="step">
                <h2>üîå Verkabelung pr√ºfen</h2>
                <p class="step-description">Ist die Verkabelung korrekt?</p>
                
                <div class="info-box">
                    <strong>üìã Richtige Verkabelung:</strong><br><br>
                    <strong>1. Glasfaser-Patchkabel:</strong><br>
                    üìç Wanddose (NFP) ‚Üí ONT (Port: FG/Fiber)<br><br>
                    <strong>2. Netzwerkkabel (RJ45):</strong><br>
                    üìç ONT (Port: LAN1/GE1) ‚Üí Router (WAN/Internet-Port)
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="checkVerkabelung('ok')">
                        ‚úÖ Verkabelung korrekt
                    </button>
                    <button class="btn btn-warning" onclick="alert('‚ö†Ô∏è Bitte Verkabelung korrigieren und erneut pr√ºfen!'); checkVerkabelung('korrigiert')">
                        üîß Verkabelung war falsch (jetzt korrigiert)
                    </button>
                </div>
            </div>

            <!-- ===== STEP 6: ONT Status ===== -->
            <div id="step6-ont" class="step">
                <h2>üí° ONT Status pr√ºfen</h2>
                <p class="step-description">Welche LEDs leuchten am ONT (Glasfaser-Modem)?</p>
                
                <div class="info-box">
                    <strong>üìã LED-Bedeutung am ONT:</strong><br><br>
                    üü¢ <strong>POWER:</strong> Muss leuchten (Stromversorgung)<br>
                    üü¢ <strong>PON/FIBER/LOS:</strong> Muss leuchten (Glasfaser-Signal)<br>
                    üü¢ <strong>LAN/GE:</strong> Sollte leuchten (Verbindung zum Router)
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="setONTStatus('alle-gruen')">
                        üü¢ Alle relevanten LEDs gr√ºn
                    </button>
                    <button class="btn btn-warning" onclick="setONTStatus('pon-rot')">
                        üî¥ PON/FIBER LED rot oder aus
                    </button>
                    <button class="btn btn-danger" onclick="setONTStatus('kein-strom')">
                        ‚ö´ Keine LEDs (kein Strom)
                    </button>
                </div>
            </div>

            <!-- ===== STEP 7: FRITZ!Box Konfiguration ===== -->
            <div id="step7-fritzbox" class="step">
                <h2>üî¥ FRITZ!Box konfigurieren</h2>
                <p class="step-description">Bitte folgende Einstellungen pr√ºfen/eintragen:</p>
                
                <div class="info-box">
                    <strong>üìã Einstellungen f√ºr FRITZ!Box:</strong><br><br>
                    
                    <strong>1. Assistent starten:</strong><br>
                    ‚Ä¢ Browser √∂ffnen: <code>http://fritz.box</code><br>
                    ‚Ä¢ Internet ‚Üí Zugangsdaten ‚Üí Anbieter √§ndern<br><br>
                    
                    <strong>2. Einstellungen:</strong><br>
                    ‚Ä¢ Anschluss: <strong>Glasfaser-Modem</strong><br>
                    ‚Ä¢ Internetanbieter: <strong>o2</strong> (aus Liste w√§hlen)<br>
                    ‚Ä¢ Benutzername: (leer lassen)<br>
                    ‚Ä¢ Kennwort: (leer lassen)<br><br>
                    
                    <strong>3. Speichern & Warten:</strong><br>
                    ‚Ä¢ Einstellungen √ºbernehmen<br>
                    ‚Ä¢ 2-3 Minuten warten<br>
                    ‚Ä¢ Internet-LED pr√ºfen
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="nextStep('step8-verbindung')">
                        ‚úÖ Konfiguration durchgef√ºhrt ‚Üí Weiter
                    </button>
                </div>
            </div>

            <!-- ===== STEP 7: HomeBox Konfiguration ===== -->
            <div id="step7-homebox" class="step">
                <h2>üîµ o2 HomeBox konfigurieren</h2>
                <p class="step-description">Bitte folgende Einstellungen pr√ºfen/eintragen:</p>
                
                <div class="info-box">
                    <strong>üìã Einstellungen f√ºr o2 HomeBox:</strong><br><br>
                    
                    <strong>1. Webinterface √∂ffnen:</strong><br>
                    ‚Ä¢ Browser: <code>http://o2.box</code> oder <code>192.168.1.1</code><br>
                    ‚Ä¢ Login mit Ger√§tepasswort (steht auf R√ºckseite)<br><br>
                    
                    <strong>2. Einstellungen:</strong><br>
                    ‚Ä¢ Internet ‚Üí Verbindung ‚Üí Glasfaser<br>
                    ‚Ä¢ VLAN-ID: (leer/deaktiviert)<br>
                    ‚Ä¢ Authentifizierung: <strong>Keine</strong><br><br>
                    
                    <strong>3. Speichern & Warten:</strong><br>
                    ‚Ä¢ Einstellungen √ºbernehmen<br>
                    ‚Ä¢ Router startet neu (ca. 2 Min.)<br>
                    ‚Ä¢ Internet-LED pr√ºfen
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="nextStep('step8-verbindung')">
                        ‚úÖ Konfiguration durchgef√ºhrt ‚Üí Weiter
                    </button>
                </div>
            </div>

            <!-- ===== STEP 8: Verbindung pr√ºfen ===== -->
            <div id="step8-verbindung" class="step">
                <h2>üåê Verbindung pr√ºfen</h2>
                <p class="step-description">Hat der Router jetzt eine Internet-Verbindung?</p>
                
                <div class="info-box">
                    <strong>üîç Wie pr√ºfen?</strong><br><br>
                    <strong>FRITZ!Box:</strong><br>
                    ‚Ä¢ Internet-LED leuchtet gr√ºn<br>
                    ‚Ä¢ fritz.box ‚Üí Internet ‚Üí Online-Monitor zeigt "Verbunden"<br><br>
                    
                    <strong>HomeBox:</strong><br>
                    ‚Ä¢ Internet-LED leuchtet gr√ºn<br>
                    ‚Ä¢ o2.box ‚Üí Status zeigt "Verbunden"<br><br>
                    
                    <strong>Test:</strong><br>
                    ‚Ä¢ Website √∂ffnen (z.B. google.de)<br>
                    ‚Ä¢ Speedtest durchf√ºhren
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="setVerbindung('ok')">
                        ‚úÖ Verbindung steht - Kunde ist online!
                    </button>
                    <button class="btn btn-danger" onclick="setVerbindung('nok')">
                        ‚ùå Keine Verbindung
                    </button>
                </div>
            </div>

            <!-- ===== STEP 9: Portreset ===== -->
            <div id="step9-portreset" class="step">
                <h2>üîÑ Portreset durchf√ºhren</h2>
                <p class="step-description">Bitte im entsprechenden System einen Portreset durchf√ºhren</p>
                
                <div class="info-box warning">
                    <strong>‚ö†Ô∏è Portreset durchf√ºhren in:</strong><br><br>
                    <strong>DTAG:</strong> VIT Glasfaser Portal<br>
                    <strong>DNS:NET:</strong> DNS:NET Portal<br>
                    <strong>inexio:</strong> inexio Partnersystem<br><br>
                    
                    <strong>Nach Portreset:</strong><br>
                    ‚Ä¢ 2-3 Minuten warten<br>
                    ‚Ä¢ ONT & Router pr√ºfen<br>
                    ‚Ä¢ Verbindung testen
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="setPortreset('ok')">
                        ‚úÖ Portreset erfolgreich - Verbindung steht!
                    </button>
                    <button class="btn btn-danger" onclick="setPortreset('nok')">
                        ‚ùå Portreset ohne Erfolg
                    </button>
                </div>
            </div>

            <!-- ===== STEP 10: Komplettausfall ===== -->
            <div id="step10-komplettausfall" class="step">
                <h2>üî¥ Komplettausfall beheben</h2>
                <p class="step-description">Troubleshooting-Schritte durchf√ºhren</p>
                
                <div class="info-box">
                    <strong>üìã Checkliste Komplettausfall:</strong><br><br>
                    
                    ‚úÖ <strong>1. ONT Status pr√ºfen:</strong><br>
                    ‚Ä¢ Power LED leuchtet?<br>
                    ‚Ä¢ PON/Fiber LED gr√ºn?<br>
                    ‚Ä¢ Falls rot/aus: Stromreset am ONT<br><br>
                    
                    ‚úÖ <strong>2. Router neu starten:</strong><br>
                    ‚Ä¢ Strom ziehen, 30 Sek. warten<br>
                    ‚Ä¢ Wieder einstecken, 2-3 Min. warten<br><br>
                    
                    ‚úÖ <strong>3. Verkabelung pr√ºfen:</strong><br>
                    ‚Ä¢ Alle Kabel fest eingesteckt?<br>
                    ‚Ä¢ Richtiger Port am Router (WAN)?<br><br>
                    
                    ‚úÖ <strong>4. Portreset durchf√ºhren:</strong><br>
                    ‚Ä¢ Im entsprechenden Portal<br>
                    ‚Ä¢ 2-3 Minuten warten
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="komplettausfallResolved()">
                        ‚úÖ Problem behoben - Kunde online!
                    </button>
                    <button class="btn btn-danger" onclick="komplettausfallEskalieren()">
                        ‚ùå Alle Schritte ohne Erfolg ‚Üí Eskalieren
                    </button>
                </div>
            </div>

            <!-- ===== STEP 11: Sporadische Abbr√ºche ===== -->
            <div id="step11-sporadisch" class="step">
                <h2>‚ö° Sporadische Abbr√ºche analysieren</h2>
                <p class="step-description">Verbindungsabbr√ºche pr√ºfen und dokumentieren</p>
                
                <div class="info-box">
                    <strong>üìã Vorgehen bei sporadischen Abbr√ºchen:</strong><br><br>
                    
                    ‚úÖ <strong>1. Portreset durchf√ºhren</strong><br><br>
                    
                    ‚úÖ <strong>2. Bei FRITZ!Box: 171 LAC Log pr√ºfen</strong><br>
                    ‚Ä¢ fritz.box ‚Üí System ‚Üí Ereignisse<br>
                    ‚Ä¢ Nach "PPP" oder "Verbindung" filtern<br>
                    ‚Ä¢ Fehlercode 171 LAC notieren<br><br>
                    
                    ‚úÖ <strong>3. Beobachtungsphase:</strong><br>
                    ‚Ä¢ Kunde soll 24-48h beobachten<br>
                    ‚Ä¢ Bei weiteren Abbr√ºchen: Zeitpunkt notieren<br><br>
                    
                    <strong>üí° Entscheidung:</strong><br>
                    ‚Ä¢ Abbr√ºche selten (1-2x/Tag): WFC<br>
                    ‚Ä¢ Abbr√ºche h√§ufig (mehrmals/Stunde): STM
                </div>

                <div class="button-group">
                    <button class="btn btn-warning" onclick="sporadischWFC()">
                        üìã Ins WFC zur Beobachtung
                    </button>
                    <button class="btn btn-danger" onclick="sporadischEskalieren()">
                        üö® Direkt eskalieren (STM)
                    </button>
                </div>
            </div>

            <!-- ===== STEP 12: Performance ===== -->
            <div id="step12-performance" class="step">
                <h2>üìä Performance pr√ºfen</h2>
                <p class="step-description">Geschwindigkeit messen und bewerten</p>
                
                <div class="info-box">
                    <strong>‚ö†Ô∏è Wichtig vor dem Test:</strong><br>
                    ‚Ä¢ Test per LAN-Kabel (nicht WLAN!)<br>
                    ‚Ä¢ Alle anderen Ger√§te offline<br>
                    ‚Ä¢ Speedtest auf: <a href="https://speedtest.net" target="_blank">speedtest.net</a>
                </div>

                <div class="input-group">
                    <label for="tarif">Gebuchter Tarif:</label>
                    <select id="tarif">
                        <option value="50">50 Mbit/s</option>
                        <option value="100">100 Mbit/s</option>
                        <option value="250">250 Mbit/s</option>
                        <option value="1000">1000 Mbit/s (1 Gbit/s)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="download">Gemessener Download (Mbit/s):</label>
                    <input type="number" id="download" placeholder="z.B. 45.5">
                </div>

                <div class="input-group">
                    <label for="upload">Gemessener Upload (Mbit/s):</label>
                    <input type="number" id="upload" placeholder="z.B. 8.2">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="checkPerformance()">
                        üîç Performance pr√ºfen
                    </button>
                </div>

                <div id="performanceResult"></div>

                <div class="info-box" style="margin-top: 20px;">
                    <strong>üìä Schwellenwerte (50% der gebuchten Leistung):</strong><br><br>
                    <strong>50 Mbit/s:</strong> Min. 25 Down / 5 Up<br>
                    <strong>100 Mbit/s:</strong> Min. 50 Down / 20 Up<br>
                    <strong>250 Mbit/s:</strong> Min. 125 Down / 20 Up<br>
                    <strong>1000 Mbit/s:</strong> Min. 500 Down / 100 Up
                </div>
            </div>

            <!-- ===== FINAL: Erfolg ===== -->
            <div id="final-success" class="step">
                <div class="result-box success">
                    <h2>‚úÖ Problem gel√∂st!</h2>
                    <p>Der Kunde ist wieder online. Ticket kann geschlossen werden.</p>
                </div>

                <div class="info-box">
                    <strong>üìã Dokumentation f√ºr Ticket:</strong>
                    <textarea id="finalDocumentation" readonly style="width: 100%; height: 300px; font-family: monospace; font-size: 0.9em; padding: 15px; border: 1px solid #ddd; border-radius: 8px;"></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="copyToClipboard('finalDocumentation')">
                        üìã In Zwischenablage kopieren
                    </button>
                    <button class="btn btn-primary" onclick="restart()">
                        üîÑ Neuen Fall starten
                    </button>
                </div>
            </div>

            <!-- ===== FINAL: WFC ===== -->
            <div id="final-wfc" class="step">
                <div class="result-box warning">
                    <h2>üìã Ticket ins WFC</h2>
                    <p>Beobachtungsphase erforderlich</p>
                </div>

                <div class="info-box">
                    <strong>üìã Dokumentation f√ºr WFC:</strong>
                    <textarea id="wfcDocumentation" readonly style="width: 100%; height: 300px; font-family: monospace; font-size: 0.9em; padding: 15px; border: 1px solid #ddd; border-radius: 8px;"></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="copyToClipboard('wfcDocumentation')">
                        üìã In Zwischenablage kopieren
                    </button>
                    <button class="btn btn-primary" onclick="restart()">
                        üîÑ Neuen Fall starten
                    </button>
                </div>
            </div>

            <!-- ===== FINAL: STM ===== -->
            <div id="final-stm" class="step">
                <div class="result-box error">
                    <h2>üö® STM an <span id="stmLineOwner"></span> erstellen</h2>
                    <p id="stmTermin"></p>
                </div>

                <div class="info-box">
                    <strong>üìã STM-Dokumentation:</strong>
                    <textarea id="stmDocumentation" readonly style="width: 100%; height: 350px; font-family: monospace; font-size: 0.9em; padding: 15px; border: 1px solid #ddd; border-radius: 8px;"></textarea>
                </div>

                <div class="info-box warning">
                    <strong>‚ö†Ô∏è Wichtig nach STM-Erstellung:</strong><br>
                    ‚Ä¢ STM-Nummer dokumentieren<br>
                    ‚Ä¢ Bei <span id="stmLineOwner2"></span> im entsprechenden System erstellen<br>
                    ‚Ä¢ Termin mit Kunde vereinbaren (falls erforderlich)<br>
                    ‚Ä¢ Ticket-Status auf "Wartet auf Dritte" setzen
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="copyToClipboard('stmDocumentation')">
                        üìã In Zwischenablage kopieren
                    </button>
                    <button class="btn btn-primary" onclick="restart()">
                        üîÑ Neuen Fall starten
                    </button>
                </div>
            </div>

        </div>
    </div>
</body>


    <script>
        // ===== GLOBALE VARIABLEN =====
        let currentStep = 1;
        let maxSteps = 10;
        let history = ['step1'];
        
        let data = {
            lineOwner: '',
            hasActivity: null,
            hasAnschaltdatum: null,
            ticketType: '',
            routerModel: '',
            verkabelung: '',
            ontStatus: '',
            verbindung: '',
            portreset: '',
            performanceData: null
        };

        // ===== PROGRESS BAR UPDATE =====
        function updateProgress() {
            const progress = (currentStep / maxSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Schritt ${currentStep} von ${maxSteps}`;
        }

        // ===== STEP NAVIGATION =====
        function showStep(stepId) {
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            document.getElementById(stepId).classList.add('active');
            
            if (history[history.length - 1] !== stepId) {
                history.push(stepId);
            }
            
            document.getElementById('backButton').style.display = 
                history.length > 1 ? 'block' : 'none';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextStep(stepId) {
            currentStep++;
            updateProgress();
            showStep(stepId);
        }

        function previousStep() {
            if (history.length > 1) {
                history.pop();
                const prevStep = history[history.length - 1];
                currentStep--;
                updateProgress();
                showStep(prevStep);
            }
        }

        function restart() {
            currentStep = 1;
            history = ['step1'];
            data = {
                lineOwner: '',
                hasActivity: null,
                hasAnschaltdatum: null,
                ticketType: '',
                routerModel: '',
                verkabelung: '',
                ontStatus: '',
                verbindung: '',
                portreset: '',
                performanceData: null
            };
            updateProgress();
            showStep('step1');
        }

        // ===== STEP 1: LineOwner =====
        function setLineOwner(owner) {
            data.lineOwner = owner;
            nextStep('step2');
        }

        // ===== STEP 2: Aktivit√§t =====
        function setActivity(activity) {
            data.hasActivity = activity;
            
            if (activity === 'yes') {
                nextStep('step3');
            } else if (activity === 'no') {
                nextStep('step2b');
            } else {
                showStep('final-contact');
            }
        }

        // ===== STEP 2b: Anschaltdatum =====
        function setAnschaltdatum(hasDate) {
            data.hasAnschaltdatum = hasDate;
            
            if (hasDate === 'yes') {
                data.ticketType = 'anschaltung';
                nextStep('step4-router');
            } else {
                showStep('final-contact');
            }
        }

        // ===== STEP 3: St√∂rungstyp =====
        function setTicketType(type) {
            data.ticketType = type;
            
            if (type === 'anschaltung') {
                nextStep('step4-router');
            } else if (type === 'komplettausfall') {
                nextStep('step10-komplettausfall');
            } else if (type === 'sporadisch') {
                nextStep('step11-sporadisch');
            } else if (type === 'performance') {
                nextStep('step12-performance');
            }
        }

        // ===== STEP 4: Router-Modell =====
        function setRouterModel(model) {
            data.routerModel = model;
            nextStep('step5-verkabelung');
        }

        // ===== STEP 5: Verkabelung =====
        function checkVerkabelung(type) {
            data.verkabelung = type;
            nextStep('step6-ont');
        }

        // ===== STEP 6: ONT Status =====
        function setONTStatus(status) {
            data.ontStatus = status;
            
            if (status === 'kein-strom') {
                alert('‚ö†Ô∏è Kunde muss Stromversorgung am ONT pr√ºfen!\n\nDanach Troubleshooter erneut durchlaufen.');
                return;
            }
            
            if (data.routerModel === 'fritzbox') {
                nextStep('step7-fritzbox');
            } else if (data.routerModel === 'homebox') {
                nextStep('step7-homebox');
            } else {
                alert('‚ö†Ô∏è Dritthersteller-Router:\n\nBitte Bedienungsanleitung des Routers zur Konfiguration nutzen.\n\nAllgemein: o2 als Anbieter w√§hlen, Glasfaser/FTTH als Anschlussart.');
                nextStep('step8-verbindung');
            }
        }

        // ===== STEP 8: Verbindung =====
        function setVerbindung(status) {
            data.verbindung = status;
            
            if (status === 'ok') {
                generateSuccessDocumentation();
                showStep('final-success');
            } else {
                nextStep('step9-portreset');
            }
        }

        // ===== STEP 9: Portreset =====
        function setPortreset(status) {
            data.portreset = status;
            
            if (status === 'ok') {
                generateSuccessDocumentation();
                showStep('final-success');
            } else {
                generateSTMDocumentation('anschaltung');
                showStep('final-stm');
            }
        }

        // ===== STEP 10: Komplettausfall =====
        function komplettausfallResolved() {
            generateSuccessDocumentation();
            showStep('final-success');
        }

        function komplettausfallEskalieren() {
            generateSTMDocumentation('komplettausfall');
            showStep('final-stm');
        }

        // ===== STEP 11: Sporadisch =====
        function sporadischWFC() {
            generateWFCDocumentation('sporadisch');
            showStep('final-wfc');
        }

        function sporadischEskalieren() {
            generateSTMDocumentation('sporadisch');
            showStep('final-stm');
        }

        // ===== STEP 12: Performance =====
        function checkPerformance() {
            const tarif = parseInt(document.getElementById('tarif').value);
            const download = parseFloat(document.getElementById('download').value);
            const upload = parseFloat(document.getElementById('upload').value);
            
            if (!download || !upload) {
                alert('‚ö†Ô∏è Bitte beide Werte eingeben!');
                return;
            }
            
            let minDownload, minUpload;
            
            switch(tarif) {
                case 50:
                    minDownload = 25;
                    minUpload = 5;
                    break;
                case 100:
                    minDownload = 50;
                    minUpload = 20;
                    break;
                case 250:
                    minDownload = 125;
                    minUpload = 20;
                    break;
                case 1000:
                    minDownload = 500;
                    minUpload = 100;
                    break;
            }
            
            const downloadOK = download >= minDownload;
            const uploadOK = upload >= minUpload;
            
            const resultDiv = document.getElementById('performanceResult');
            
            if (downloadOK && uploadOK) {
                resultDiv.innerHTML = `
                    <div class="info-box success" style="margin-top: 20px;">
                        <strong>‚úÖ Werte im gr√ºnen Bereich!</strong><br><br>
                        Download: ${download} Mbit/s (Min: ${minDownload} Mbit/s) ‚úÖ<br>
                        Upload: ${upload} Mbit/s (Min: ${minUpload} Mbit/s) ‚úÖ<br><br>
                        <strong>‚Üí Keine St√∂rung!</strong> Kunde hat die gebuchte Leistung.
                    </div>
                    <div class="button-group" style="margin-top: 20px;">
                        <button class="btn-primary btn" onclick="performanceResolved()">
                            ‚úÖ Ticket schlie√üen
                        </button>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="info-box error" style="margin-top: 20px;">
                        <strong>‚ùå Werte UNTER Schwellenwert!</strong><br><br>
                        Download: ${download} Mbit/s (Min: ${minDownload} Mbit/s) ${downloadOK ? '‚úÖ' : '‚ùå'}<br>
                        Upload: ${upload} Mbit/s (Min: ${minUpload} Mbit/s) ${uploadOK ? '‚úÖ' : '‚ùå'}<br><br>
                        <strong>‚Üí STM an LineOwner erstellen!</strong>
                    </div>
                    <div class="button-group" style="margin-top: 20px;">
                        <button class="btn-primary btn" onclick="performanceEskalieren(${download}, ${upload}, ${minDownload}, ${minUpload})">
                            üìã STM erstellen
                        </button>
                    </div>
                `;
            }
        }

        function performanceResolved() {
            generateSuccessDocumentation();
            showStep('final-success');
        }

        function performanceEskalieren(download, upload, minDownload, minUpload) {
            data.performanceData = { download, upload, minDownload, minUpload };
            generateSTMDocumentation('performance');
            showStep('final-stm');
        }

        // ===== DOKUMENTATION GENERIEREN =====
        function generateSuccessDocumentation() {
            const doc = `
=== TICKET ERFOLGREICH BEARBEITET ===

LineOwner: ${data.lineOwner}
Ticket-Typ: ${data.ticketType}

Durchgef√ºhrte Ma√ünahmen:
${data.routerModel ? '- Router konfiguriert (' + data.routerModel + ')' : ''}
${data.ontStatus ? '- ONT Status gepr√ºft: ' + data.ontStatus : ''}
${data.portreset === 'ok' ? '- Portreset durchgef√ºhrt (erfolgreich)' : ''}
- Verbindung erfolgreich hergestellt

Kunde ist online und zufrieden.
Ticket kann geschlossen werden.

${new Date().toLocaleString('de-DE')}
            `.trim();
            
            document.getElementById('finalDocumentation').textContent = doc;
        }

        function generateWFCDocumentation(type) {
            let doc = '';
            
            if (type === 'sporadisch') {
                const kundeErreicht = confirm('Kunde erreicht? OK = Ja, Abbrechen = Nein');
                
                doc = `
=== TICKET INS WFC ===

LineOwner: ${data.lineOwner}

Kunde ${kundeErreicht ? 'erreicht' : 'nicht erreicht'}.

Durchgef√ºhrte Ma√ünahmen:
- Portreset durchgef√ºhrt
- 171 LAC Log gepr√ºft

Kunde soll Anschluss f√ºr 24-48h auf weitere Abbr√ºche beobachten.

${kundeErreicht ? 
'Wenn weiterhin NOK: STM an LineOwner.' :
'Wenn weiterhin NOK: Neuen Termin vereinbaren, Ticket als Reklamation an LineOwner.'}

Wiedervorlage: ${new Date(Date.now() + 48*60*60*1000).toLocaleDateString('de-DE')}

${new Date().toLocaleString('de-DE')}
                `.trim();
            }
            
            document.getElementById('wfcDocumentation').textContent = doc;
        }

        function generateSTMDocumentation(type) {
            document.getElementById('stmLineOwner').textContent = data.lineOwner;
            document.getElementById('stmLineOwner2').textContent = data.lineOwner;
            
            let doc = '';
            let termin = '';
            
            if (type === 'anschaltung') {
                termin = 'OHNE Termin';
                doc = `
=== STM AN ${data.lineOwner.toUpperCase()} ===

Anschaltung - Kein Signal am ONT

Sachverhalt:
- FTTH-Anschaltung
- Router konfiguriert (${data.routerModel})
- ONT Status: ${data.ontStatus}
- Portreset + Stromreset durchgef√ºhrt
- Keine Verbindung herstellbar

Bitte Leitung pr√ºfen und Signal schalten.

${new Date().toLocaleString('de-DE')}
                `.trim();
            } else if (type === 'komplettausfall') {
                termin = 'MIT Termin (in Absprache mit Kunde)';
                doc = `
=== STM AN ${data.lineOwner.toUpperCase()} ===

Komplettausfall - Kein Internet

Sachverhalt:
- Kunde komplett offline seit [Datum eintragen]
- ONT Status gepr√ºft: [Status eintragen]
- Router neu gestartet
- Portreset durchgef√ºhrt
- Keine Verbindung herstellbar

Bitte Leitung pr√ºfen.

Termin: [Mit Kunde vereinbaren]

${new Date().toLocaleString('de-DE')}
                `.trim();
            } else if (type === 'sporadisch') {
                termin = 'MIT Termin (in Absprache mit Kunde)';
                doc = `
=== STM AN ${data.lineOwner.toUpperCase()} ===

Sporadische Verbindungsabbr√ºche

Sachverhalt:
- Verbindung bricht wiederholt ab
- 171 LAC Fehlercode: [Code eintragen]
- Portreset durchgef√ºhrt
- Problem besteht weiterhin

Bitte Leitung auf St√∂rungen pr√ºfen.

Termin: [Mit Kunde vereinbaren]

${new Date().toLocaleString('de-DE')}
                `.trim();
            } else if (type === 'performance') {
                const perf = data.performanceData;
                termin = 'MIT Termin (in Absprache mit Kunde)';
                doc = `
=== STM AN ${data.lineOwner.toUpperCase()} ===

Performance unter Schwellenwert

Sachverhalt:
- Speedtest per LAN durchgef√ºhrt
- Download: ${perf.download} Mbit/s (Min: ${perf.minDownload} Mbit/s)
- Upload: ${perf.upload} Mbit/s (Min: ${perf.minUpload} Mbit/s)
- Werte unter Schwellenwert

Bitte Leitung pr√ºfen.

Termin: [Mit Kunde vereinbaren]

${new Date().toLocaleString('de-DE')}
                `.trim();
            }
            
            document.getElementById('stmTermin').textContent = termin;
            document.getElementById('stmDocumentation').textContent = doc;
        }

        // ===== COPY TO CLIPBOARD =====
        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ In Zwischenablage kopiert!');
            });
        }

        // ===== INITIALISIERUNG =====
        updateProgress();
    </script>
</html>
